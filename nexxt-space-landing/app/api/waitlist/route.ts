import{NextRequest,NextResponse}from'next/server';import type{WaitlistPayload,WaitlistResponse}from'@/types/waitlist';export async function POST(r:NextRequest){try{const b:WaitlistPayload=await r.json();if(!b.email)return NextResponse.json({success:false,message:'Email is required'}as WaitlistResponse,{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email))return NextResponse.json({success:false,message:'Invalid email format'}as WaitlistResponse,{status:400});console.log('Waitlist:',{email:b.email,name:b.name,referralCode:b.referralCode,timestamp:new Date().toISOString()});return NextResponse.json({success:true,message:'Successfully joined the waitlist'}as WaitlistResponse,{status:200})}catch(e){console.error('Waitlist error:',e);return NextResponse.json({success:false,message:'An error occurred. Please try again.'}as WaitlistResponse,{status:500})}}
